{% extends 'core/base.html' %}
{% block title %}Contractor Dashboard{% endblock %}

{% block content %}
<div class="container">
  <h1 class="mb-4">Contractor Dashboard</h1>

  <!-- Company Info -->
  <div class="card border-primary shadow-sm mb-4">
    <div class="card-body">
      <h5 class="card-title">Company Information</h5>
      <ul class="list-group">
        <li class="list-group-item"><strong>Name:</strong> {{ company.name|default:"Not provided" }}</li>
        <li class="list-group-item"><strong>Email:</strong> {{ company.email|default:"Not provided" }}</li>
        <li class="list-group-item"><strong>Phone:</strong> {{ company.phone|default:"Not provided" }}</li>
        <li class="list-group-item"><strong>Website:</strong> 
          {% if company.website %}
            <a href="{{ company.website }}" target="_blank">{{ company.website }}</a>
          {% else %}
            <span class="text-muted">Not provided</span>
          {% endif %}
        </li>
        <li class="list-group-item"><strong>Address:</strong> {{ company.address|default:"Not provided" }}</li>
      </ul>
    </div>
  </div>

  <!-- Work Orders -->
  <div class="card border-secondary shadow-sm">
    <div class="card-body">
      <h5 class="card-title">Your Work Orders</h5>

      {% if work_orders %}
        <ul class="list-group">
          {% for work_order in work_orders %}
            <li class="list-group-item">
              <a href="{% url 'view_work_order_detail' work_order.id %}">
                <strong>{{ work_order.title }}</strong>
              </a><br>
              <small class="text-muted">Due: {{ work_order.due_date }}</small><br>
              <span>Status: <strong>{{ work_order.get_status_display }}</strong></span><br>
              <!-- Action buttons now shown on detail page only -->
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-muted">No work orders currently assigned to your company.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
