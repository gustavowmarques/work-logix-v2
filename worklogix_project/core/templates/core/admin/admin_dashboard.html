{% extends 'core/base.html' %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container">
  <h1 class="mb-4">Admin Dashboard</h1>

  <div class="row g-4">
    <!-- Companies Card -->
    <div class="col-md-4">
      <div class="card border-primary shadow-sm h-100">
        <div class="card-body">
          <h5 class="card-title">Companies</h5>
          <p class="card-text">
            Contractors or Property Management Companies.
          </p>
          <ul class="list-unstyled small mb-2">
            <li><strong>Property Managers:</strong> {{ managers.count }}</li>
            <li><strong>Contractors:</strong> {{ contractors.count }}</li>
          </ul>
          <a href="{% url 'create_company' %}" class="btn btn-primary btn-sm">Create New Company</a>
          <a href="{% url 'manage_companies' %}" class="btn btn-outline-primary btn-sm">Manage Companies</a>
        </div>
      </div>
    </div>

    <!-- Users Card -->
    <div class="col-md-4">
      <div class="card border-success shadow-sm h-100">
        <div class="card-body">
          <h5 class="card-title">Users</h5>
          <p class="card-text">
            Manage system users (Admins, PMs, Contractors, Assistants).
          </p>
          <ul class="list-unstyled small mb-2">
            <li><strong>Total Users:</strong> {{ users.count }}</li>
          </ul>
          <a href="{% url 'create_user' %}" class="btn btn-primary btn-sm">Create New User</a>
          <a href="{% url 'manage_users' %}" class="btn btn-outline-success btn-sm">Manage Users</a>
        </div>
      </div>
    </div>

    <!-- Work Orders Card -->
    <div class="col-md-4">
      <div class="card border-warning shadow-sm h-100">
        <div class="card-body">
          <h5 class="card-title">Work Orders</h5>
          <p class="card-text">
            View and track submitted work orders across all companies.
          </p>
          <ul class="list-unstyled small mb-2">
            <li><strong>Open Work Orders:</strong> {{ open_work_count }}</li>
            <strong>In Progress:</strong> {{ in_progress_count }}<br>
            <li><strong>Completed:</strong> {{ completed_work_count }}</li>
          </ul>
          <a href="{% url 'admin_work_orders' %}" class="btn btn-warning btn-sm">View Work Orders</a>
          <a href="{% url 'create_work_order' %}" class="btn btn-primary btn-sm">Create Work Order</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Second Row: Clients Card -->
  <div class="row g-4 mt-2">
    <div class="col-md-4">
      <div class="card border-info shadow-sm h-100">
        <div class="card-body">
          <h5 class="card-title">Clients</h5>
          <p class="card-text">
            Add and manage client sites (buildings or estates) linked to PM agencies.
          </p>
          <ul class="list-unstyled small mb-2">
            <li><strong>Total Clients:</strong> {{ clients.count }}</li>
          </ul>
          <a href="{% url 'create_client' %}" class="btn btn-info btn-sm">Create New Client</a>
          <a href="{% url 'manage_clients' %}" class="btn btn-outline-info btn-sm">Manage Clients</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
